@page "/"
@using BlazorClientGlobalExceptionHandler.Client.Services.ErrorHandling

<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h4">Hello, world!</MudText>
<br />
<MudButton Variant="Variant.Filled" Color="Color.Error" Class="ma-2" OnClick="ThrowException">Throw Exception</MudButton>
<br />
<MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ma-2" OnClick="GetExceptions">Get Exceptions</MudButton>

<MudText Class="ma-2">Count of Exceptions: @errors.Count</MudText>

@code{

    List<string> errors = new List<string>();

    private void ThrowException()
    {
        throw new Exception("An unhandled exception occurred from me to you");
    }

    private void GetExceptions()
    {
        errors.Clear();
        ErrorNotificaitonService.GetExceptions().ForEach(e => errors.Add(e.Message));
        StateHasChanged();
    }
}
